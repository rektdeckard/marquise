{"version":3,"sources":["api/API.js","components/App.js","index.js"],"names":["axios","create","baseURL","headers","versioning","App","useState","messages","setMessages","on","setOn","isOfflineMode","setIsOfflineMode","message","setMessage","color","setColor","speed","setSpeed","brightness","setBrightness","huebee","useRef","useEffect","isMounted","a","API","get","record","data","console","log","error","load","current","Huebee","notation","saturations","hues","hue0","hue","sat","lum","doSubmit","state","put","className","htmlFor","id","type","value","onChange","target","min","max","bri","Math","parseInt","isNaN","ref","style","cursor","hex","title","onClick","text","substring","map","index","key","backgroundColor","toString","remaining","filter","it","handleDismiss","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6fb35d9c.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default axios.create({\r\n  baseURL: \"https://api.jsonbin.io/v3/b/5ef17e1f97cb753b4d160c53\",\r\n  headers: {\r\n    \"secret-key\":\r\n      \"$2b$10$AOXx.uD.2vMLIWBhNRyF6.qDasREvbbmaKmPVNtaPgkT/0pF7S52q\",\r\n    \"Content-Type\": \"application/json\",\r\n    versioning: false,\r\n  },\r\n});\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Huebee from \"huebee\";\r\n\r\nimport \"../assets/huebee.css\";\r\nimport API from \"../api/API\";\r\n\r\nconst App = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [on, setOn] = useState(true);\r\n  const [isOfflineMode, setIsOfflineMode] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [color, setColor] = useState(\"#F56565\");\r\n  const [speed, setSpeed] = useState(2);\r\n  const [brightness, setBrightness] = useState(25);\r\n\r\n  const huebee = useRef();\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const load = async () => {\r\n      try {\r\n        const { data: { record } } = await API.get(\"/latest\");\r\n        console.log(record);\r\n        if (isMounted) {\r\n          setMessages(record.messages);\r\n          setOn(record.on);\r\n          setIsOfflineMode(record.isOfflineMode);\r\n        }\r\n      } catch(e) {\r\n        console.error(e);\r\n      }\r\n    };\r\n\r\n    const setupPicker = () => {\r\n      huebee.current = new Huebee(\".color-input\", {\r\n        notation: \"hex\",\r\n        saturations: 1,\r\n        hues: 20,\r\n        hue0: 210,\r\n      });\r\n      huebee.current.on(\"change\", (color, hue, sat, lum) => {\r\n        if (isMounted) setColor(color);\r\n      });\r\n    };\r\n\r\n    load();\r\n    setupPicker();\r\n\r\n    return () => (isMounted = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    huebee.current?.setColor(color); // eslint-disable-line no-unused-expressions\r\n  }, [color]);\r\n\r\n  const doSubmit = async (state = { on: false }) => {\r\n    try {\r\n      const { data: { record } } = await API.put(\"/\", state);\r\n      console.log(record);\r\n      setMessages(record?.messages ?? []);\r\n      setOn(record?.on ?? true);\r\n      setIsOfflineMode(record?.isOfflineMode ?? false);\r\n      setBrightness(record?.brightness ?? 25);\r\n    } catch(e) {\r\n      console.error(\"Could not complete request\", e);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    doSubmit({\r\n      messages: [\r\n        ...messages,\r\n        { text: message, color: parseInt(color.substring(1), 16), speed },\r\n      ],\r\n      on,\r\n      brightness,\r\n      isOfflineMode,\r\n    });\r\n  };\r\n\r\n  const handleDismiss = (message) => {\r\n    const remaining = messages.filter((it) => it.text !== message);\r\n    doSubmit({ on, brightness, isOfflineMode, messages: remaining });\r\n  };\r\n\r\n  const handleClear = () => {\r\n    doSubmit({ on, brightness, isOfflineMode, messages: [] });\r\n  };\r\n\r\n  const toggleOn = () => {\r\n    doSubmit({ on: !on, brightness, isOfflineMode, messages });\r\n  };\r\n\r\n  const toggleisOffline = () => {\r\n    doSubmit({ on, brightness, messages, isOfflineMode: !isOfflineMode });\r\n  };\r\n\r\n  const handleColorChange = ({ hex }) => {\r\n    setColor(hex);\r\n  };\r\n\r\n  const handleBrightnessChange = ({ target: { value } }) => {\r\n    const bri = Math.min(Math.max(parseInt(value), 0), 255);\r\n    if (!isNaN(bri)) setBrightness(bri);\r\n  };\r\n\r\n  const renderMessage = (message, index) => (\r\n    <div\r\n      key={index}\r\n      className=\"max-w-lg mx-auto flex p-2 bg-gray-900 text-gray-400 rounded-lg shadow-xl mb-4\"\r\n    >\r\n      <div\r\n        className=\"inline-block rounded text-center text-gray-900 px-4 py-2 m-2\"\r\n        style={{ backgroundColor: `#${message.color.toString(16)}` }}\r\n      >\r\n        {index + 1}\r\n      </div>\r\n      <div className=\"flex-1 px-4 py-2 m-2 font-mono truncate\">\r\n        {message.text}\r\n      </div>\r\n      <button\r\n        className=\"inline-block rounded text-center px-4 py-2 m-2 bg-gray-800 hover:bg-red-700 font-bold text-white focus:outline-none focus:shadow-outline\"\r\n        type=\"button\"\r\n        onClick={() => handleDismiss(message.text)}\r\n      >\r\n        x\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen min-w-screen p-8 md:p-24 bg-gray-700\">\r\n      <div className=\"max-w-lg mx-auto px-4 pb-8 text-gray-400 font-mono text-center\">\r\n        {/* <img src={logo} alt=\"Marquise logo\" /> */}\r\n        <p className=\"text-4xl\">Marquise</p>\r\n        <p className=\"text-sm\">\r\n          A handy little LED sign you can command from your browser :)\r\n        </p>\r\n      </div>\r\n      <div className=\"max-w-lg mx-auto flex p-4 bg-gray-900 rounded-lg shadow-xl mb-4\">\r\n        <form className=\"w-full\">\r\n          <div className=\"rounded bg-gray-800 p-4 mb-2\">\r\n            <div>\r\n              <label\r\n                className=\"block font-mono text-gray-400 text-sm font-bold mb-2\"\r\n                htmlFor=\"message\"\r\n              >\r\n                MESSAGE\r\n              </label>\r\n              <textarea\r\n                className={`shadow appearance-none ${\r\n                  false ? \"border-red-600\" : \"\"\r\n                } rounded resize-y h-16 w-full py-2 px-3 bg-green-200 text-gray-900 font-mono mb-3 leading-tight focus:outline-none focus:shadow-outline`}\r\n                id=\"message\"\r\n                type=\"text\"\r\n                value={message}\r\n                onChange={({ target: { value } }) => setMessage(value)}\r\n              />\r\n            </div>\r\n            <div className=\"flex flex-wrap -mx-3 mb-2\">\r\n              <div className=\"w-full sm:w-1/2 px-3 mb-2 sm:mb-0\">\r\n                <label\r\n                  className=\"block font-mono text-gray-400 text-sm font-bold mb-2\"\r\n                  htmlFor=\"speed\"\r\n                >\r\n                  SPEED\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 bg-green-200 text-gray-900 font-mono mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"speed\"\r\n                  type=\"number\"\r\n                  value={speed}\r\n                  min={1}\r\n                  max={5}\r\n                  onChange={({ target: { value } }) => setSpeed(value)}\r\n                />\r\n              </div>\r\n              <div className=\"w-full sm:w-1/2 px-3 mb-2 sm:mb-0\">\r\n                <label\r\n                  className=\"block font-mono text-gray-400 text-sm font-bold mb-2\"\r\n                  htmlFor=\"brightness\"\r\n                >\r\n                  BRIGHTNESS\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 bg-green-200 text-gray-900 font-mono mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"brightness\"\r\n                  type=\"number\"\r\n                  value={brightness}\r\n                  min={1}\r\n                  max={255}\r\n                  onChange={handleBrightnessChange}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label\r\n                className=\"block font-mono text-gray-400 text-sm font-bold mb-2\"\r\n                htmlFor=\"color\"\r\n              >\r\n                COLOR\r\n              </label>\r\n              <input\r\n                ref={huebee}\r\n                id=\"color2\"\r\n                className=\"color-input shadow appearance-none rounded w-full py-2 px-3 bg-green-200 text-gray-900 font-mono mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                style={{ cursor: \"pointer\" }}\r\n                value={color}\r\n                onChange={handleColorChange}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"rounded bg-gray-800 p-4\">\r\n            <div className=\"flex items-center space-x-3 mb-3\">\r\n              <button\r\n                className={`w-full ${\r\n                  on\r\n                    ? \"bg-gray-700 hover:bg-gray-500\"\r\n                    : \"bg-gray-500 hover:bg-gray-700\"\r\n                } text-white text-sm font-mono py-2 px-4 rounded focus:outline-none focus:shadow-outline`}\r\n                type=\"button\"\r\n                title=\"Screen power. When 'OFF', checks every 10 seconds for power state.\"\r\n                onClick={toggleOn}\r\n              >\r\n                {on ? \"ON\" : \"OFF\"}\r\n              </button>\r\n              <button\r\n                className={`w-full ${\r\n                  isOfflineMode\r\n                    ? \"bg-gray-500 hover:bg-gray-700\"\r\n                    : \"bg-gray-700 hover:bg-gray-500\"\r\n                } text-white text-sm font-mono py-2 px-4 rounded focus:outline-none focus:shadow-outline`}\r\n                type=\"button\"\r\n                title=\"When 'LIVE', device will check for new messages once a minute. Use 'OFFLINE' mode if you want to set messages to use on the go. Requires hard-reset.\"\r\n                onClick={toggleisOffline}\r\n              >\r\n                {isOfflineMode ? \"OFFLINE\" : \"LIVE\"}\r\n              </button>\r\n              <button\r\n                className=\"w-full bg-gray-500 hover:bg-gray-700 text-white text-sm font-mono py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                type=\"button\"\r\n                title=\"Delete all custom messages. Will revert to device's default message.\"\r\n                onClick={handleClear}\r\n              >\r\n                CLEAR\r\n              </button>\r\n            </div>\r\n            <button\r\n              className=\"w-full bg-red-500 hover:bg-red-700 text-white text-sm font-mono py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n              type=\"button\"\r\n              title=\"Upload a message to the device.\"\r\n              onClick={handleSubmit}\r\n            >\r\n              SEND\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      {messages?.map(renderMessage)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/main.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA"],"sourceRoot":""}